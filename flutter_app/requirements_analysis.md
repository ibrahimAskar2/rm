# تحليل متطلبات تطبيق فريق الأنصار

## نظرة عامة
تطبيق "فريق الأنصار" هو تطبيق إدارة شؤون العمل للهواتف المحمولة بنظام Android، يهدف إلى تسهيل إدارة الموظفين وتتبع حضورهم وتوفير وسائل تواصل فعالة بينهم. يتميز التطبيق بواجهة مستخدم احترافية وسهلة الاستخدام مع شعار "مكتبة الأنصار" المقدم.

## المتطلبات الوظيفية

### 1. نظام المستخدمين والصلاحيات
- حساب مشرف مع صلاحيات إدارية كاملة
- حسابات للموظفين مع صلاحيات محدودة
- إمكانية إضافة موظفين جدد من قبل المشرف
- إدارة الملفات الشخصية للمستخدمين

### 2. نظام تسجيل الحضور
- تسجيل دخول وخروج الموظفين
- تأكيد عملية تسجيل الدخول/الخروج لتجنب الضغط الخاطئ
- دعم المصادقة بالبصمة
- إرسال إشعار عام عند دخول أو خروج أي موظف
- إرسال إشعار للموظف إذا تأخر عن الدوام (بعد الساعة 9 صباحاً)

### 3. نظام الدردشة
- دردشات فردية بين الموظفين
- مجموعات دردشة مع إمكانية إضافة أعضاء
- عرض حالة قراءة واستلام الرسائل
- البحث في المحادثات
- دعم إرسال الرسائل الصوتية
- دعم إرسال الصور

### 4. لوحة المعلومات التفاعلية
- عرض الموظفين المتواجدين حالياً
- عرض عدد الغياب
- عرض الموظف المميز (أول من يدخل)
- عرض إحصائيات الدوام (يومي/أسبوعي/شهري/سنوي)

### 5. واجهة المستخدم
- شريط تبويبات في أسفل التطبيق يتضمن:
  - الشاشة الرئيسية
  - الدردشات
  - الإحصائيات
  - الملف الشخصي
  - الإعدادات (الوضع الليلي، اللغة، تسجيل الخروج)
- تبويب إضافي في حساب المشرف للوحة التحكم
- إمكانية تعديل الملف الشخصي وإضافة صورة ومعلومات تفصيلية

## المتطلبات غير الوظيفية
- تصميم احترافي وجذاب
- سهولة الاستخدام وتجربة مستخدم سلسة
- أداء سريع ومستقر
- أمان البيانات وخصوصيتها
- توافق مع أجهزة Android المختلفة
- إمكانية التوسع المستقبلي

## التقنيات المقترحة للتطوير

بعد تحليل المتطلبات، تم اختيار التقنيات التالية لتطوير التطبيق:

### 1. إطار العمل: Flutter
- **السبب**: يوفر Flutter واجهات مستخدم جذابة وأداء عالي مع إمكانية التطوير السريع
- **المميزات**:
  - تطوير واجهات مستخدم جميلة وسلسة
  - أداء قريب من التطبيقات الأصلية
  - مكتبات غنية لدعم مختلف الميزات المطلوبة
  - إمكانية التوسع المستقبلي لدعم iOS إذا لزم الأمر

### 2. قاعدة البيانات والخدمات السحابية: Firebase
- **السبب**: توفر Firebase حلاً متكاملاً للمصادقة وتخزين البيانات والرسائل والإشعارات
- **الخدمات المستخدمة**:
  - Firebase Authentication: لإدارة المستخدمين والمصادقة
  - Cloud Firestore: لتخزين بيانات المستخدمين والحضور والإحصائيات
  - Firebase Storage: لتخزين الصور والملفات الصوتية
  - Firebase Cloud Messaging: لإدارة الإشعارات
  - Firebase Realtime Database: لنظام الدردشة في الوقت الفعلي

### 3. مكتبات إضافية:
- **local_auth**: لدعم المصادقة بالبصمة
- **provider/bloc**: لإدارة حالة التطبيق
- **intl**: لدعم التعريب والتاريخ/الوقت
- **image_picker**: للتعامل مع الصور
- **audio_recorder**: لتسجيل الرسائل الصوتية
- **charts_flutter**: لعرض الإحصائيات والرسوم البيانية
- **shared_preferences**: لتخزين إعدادات المستخدم محلياً

## هيكل قاعدة البيانات المقترح

### 1. مجموعة Users
- userId (المفتاح)
- name
- email
- phoneNumber
- role (admin/employee)
- profilePicture
- lastActive
- fcmToken (للإشعارات)
- additionalInfo (معلومات إضافية اختيارية)

### 2. مجموعة Attendance
- attendanceId (المفتاح)
- userId
- date
- checkInTime
- checkOutTime
- status (present/absent/late)
- notes

### 3. مجموعة Chats
- chatId (المفتاح)
- type (individual/group)
- participants (مصفوفة من userId)
- createdAt
- createdBy
- lastMessage
- lastMessageTime

### 4. مجموعة Messages
- messageId (المفتاح)
- chatId
- senderId
- content
- contentType (text/image/voice)
- timestamp
- readBy (مصفوفة من userId)
- deliveredTo (مصفوفة من userId)

### 5. مجموعة Notifications
- notificationId (المفتاح)
- type
- title
- body
- senderId
- receiverId (قد يكون "all" للإشعارات العامة)
- timestamp
- isRead

## خطة التنفيذ
سيتم تطوير التطبيق باستخدام نهج تدريجي، بدءاً من إعداد بيئة التطوير وتصميم واجهة المستخدم، ثم تنفيذ الميزات الأساسية مثل المصادقة وتسجيل الحضور، وصولاً إلى الميزات المتقدمة مثل نظام الدردشة والإحصائيات.

سيتم اختبار كل ميزة بشكل منفصل للتأكد من عملها بشكل صحيح قبل دمجها في التطبيق النهائي. وأخيراً، سيتم بناء وحزم التطبيق كملف APK قابل للتثبيت على أجهزة Android.
